作业11
刘子扬2020K8009929043

11.1 现有一块磁盘，扇区大小为512B，假设其平均寻道时间是5ms，旋转速率是15000 RPM（每分钟15000转），传输带宽是200MB/s，请计算：
1）当程序分别读取256B，1KB，4KB，1MB的数据时，这四种情况下的有效带宽各是多少？
2）如果希望软件读写该磁盘的有效带宽达到180MB/s，则软件的读写粒度应为多大？

1.
    旋转速率为$\frac{15000}{60}=250$转/秒。因此平均旋转延迟为$\frac{1}{2}\times\frac{1}{250} = 2ms$

| 数据大小 | 总时间（ms） | 有效带宽（MB/s）    | 
| --------: | :---------- | :---------- |
| 256B | 7.00122 | 0.0349  |
| 1KB  | 7.00488 | 0.1394  |
| 4KB  | 7.01953 | 0.5565  | 
| 1MB  | 12 | 83.3333  | 

2.
    令粒度为X MB。
    $\frac{X}{\frac{X}{200}+0.007} = 180$
    得粒度为12.6MB。

11.2 现有一块磁盘，假设其磁头当前位于第106磁道，正在向磁道序号增加的方向移动。现有一个磁盘访问请求序列，其访问的磁道号依次为33，55，10，68，110，180，170，205，请计算：
1）当分别采用FIFO、SSF和C-SCAN三种磁盘调度算法执行上述磁盘请求序列时，三种情况下的寻道距离各是多少？

1. FIFO: 
```
106->33->55->10->68->110->180->170->205
```
寻道距离为：73+22+45+58+42+70+10+35=355

2. SSF:
```
106->110->68->55->33->10->170->180->205
```
寻道距离为：299

3. C-SCAN
默认始终向高磁道号寻号：
```
106->110->170->180->205->10->33->55->68
```
寻道距离为：352

11.3 现有一个由5块磁盘组成的磁盘阵列，采用RAID-5模式，如下图所示。该磁盘阵列每块盘的磁盘块（block）大小为4KB，每条（strip）含一个块；磁盘的平均寻道时间是4ms，旋转速度是7200 RPM（每分钟7200转），传输带宽是200MB/s，请计算：
![image](./%E5%9B%BE%E7%89%871.jpg)
1）平均来说，从该RAID5阵列上读出一个条带（stripe）的时间是多少？
2）当向该RAID5阵列中写入连续的两个4KB数据块时，平均来说，所需的时间是多少？请考虑这两个数据块属于同一个条带和不同条带的两种情况。

1. 平均旋转延迟：$\frac{1}{2}\times\frac{1000}{120}=4.17ms$
   此RAID5阵列
   写带宽：$5*200/4=250MB/s$ 
   读带宽：$5*200=1000MB/s$
   但是，对于一个条带，由于验证块是同步写，所以可以视作向一个硬盘写，此时写带宽应当是$200MB/s$
   读出一个条带用时：$4+4.17+0.0039=8.1895ms$

2.
    RAID5写操作是两读两写。读原数据块、验证块和写数据块、验证块分别都是并行操作。合计用时$8.1895\times 2 =16.379ms$
    对于两数据块在同一条带，时间就是16.379ms。
    对于两数据块在不同条带，就是写两次，为32.758ms。